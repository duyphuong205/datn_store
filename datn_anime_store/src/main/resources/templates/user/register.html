<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	th:replace="~{/user/layout/layout-user.html :: dynamic(~{::body})}">
<body>
	<!-- Begin Kenne's Login Register Area -->
	<div class="kenne-login-register_area">
		<div class="container">
			<div class="row mt-3">
				<div class="col-sm-12 col-md-12 col-lg-10 col-xs-12 mx-auto">
					<form th:action="@{/register}" th:object="${userReq}" method="POST"
						enctype="multipart/form-data">
						<div class="login-form">
							<h1 class="login-title text-center mb-5" style="color: #a8741a;">Đăng Ký</h1>
							<div class="row">
								<div class="col-md-6 col-12 mb--20 mb-4">
									<label>Tên người dùng</label> <input type="text"
										placeholder="Nhập tên người dùng" th:field="*{username}"
										class="mb-0"> <small class="text-danger"
										style="font-size: 13px; font-weight: 600"
										th:errors="*{username}"></small> <small class="text-danger"
										style="font-size: 13px; font-weight: 600"
										th:if="${existsUsername}" th:text="${existsUsername}"></small>
								</div>
								<div class="col-md-6 col-12 mb--20 mb-4">
									<label>Họ và tên người dùng</label> <input type="text"
										placeholder="Nhập họ và tên người dùng" th:field="*{fullname}"
										class="mb-0"> <small class="text-danger"
										style="font-size: 13px; font-weight: 600"
										th:errors="*{fullname}"></small>
								</div>
								<div class="col-md-12 mb-4">
									<label>Địa chỉ email*</label> <input type="email"
										placeholder="Nhập địa chỉ email" th:field="*{email}"
										class="mb-0"> <small class="text-danger"
										style="font-size: 13px; font-weight: 600" th:errors="*{email}"></small>
									<small class="text-danger"
										style="font-size: 13px; font-weight: 600"
										th:if="${existsEmail}" th:text="${existsEmail}"></small>
								</div>
								<div class="col-md-6 mb-4">
									<label>Mật khẩu</label> <input type="password"
										placeholder="Nhập mật khẩu" th:field="*{password}"
										class="mb-0"> <small class="text-danger"
										style="font-size: 13px; font-weight: 600"
										th:errors="*{password}"></small>
								</div>
								<div class="col-md-6 mb-4">
									<label>Nhập lại mật khẩu</label> <input type="password"
										placeholder="Nhập lại mật khẩu" name="confirmPassword"
										class="mb-0"> <small class="text-danger"
										style="font-size: 13px; font-weight: 600"
										th:if="${confirmPasswordNull}"
										th:text="${confirmPasswordNull}"></small> <small
										class="text-danger" style="font-size: 13px; font-weight: 600"
										th:if="${notMatchPass}" th:text="${notMatchPass}"></small>
								</div>
								<div class="col-md-12">
									<label>Ảnh đại diện</label>
									<div class="custom-file">
										<input type="file" class="custom-file-input" id="customFile"
											onchange="loadFile(event)" name="fileImage" /> <label
											class="custom-file-label" for="customFile">Chọn ảnh</label>
									</div>
								</div>
								<div class="col-md-12 text-center mt-3">
									<img id="display_image" class="rounded-circle mx-auto"
										width="150px" />
								</div>
								<div class="col-12">
									<button type="submit" class="kenne-register_btn">Đăng
										Ký</button>
								</div>
							</div>
						</div>
					</form>
				</div>
			</div>
		</div>
	</div>
	<!-- Kenne's Login Register Area  End Here -->

	<script th:inline="javascript">
		var loadFile = function(event) {
			var image = document.getElementById("display_image");
			image.src = URL.createObjectURL(event.target.files[0]);
		};

		document.addEventListener('DOMContentLoaded', function() {
			/*<![CDATA][*/
			let messageSuccess = /*[[${successRegister}]]*/'default';
			let messageError = /*[[${errorRegister}]]*/'default';
			/*]]>*/
			if (messageSuccess !== null) {
				Swal.fire("Thành công", messageSuccess, "success");
				setTimeout(function() {
					window.location.href = '/anime/login';
				}, 3000);
			}
			if (messageError !== null) {
				Swal.fire("Thất bại", messageError, "error");
			}
		})
	</script>
</body>
</html>